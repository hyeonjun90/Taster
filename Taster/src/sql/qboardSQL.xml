<?xml version="1.0" encoding="euc-kr"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>
<sqlMap>

	<typeAlias alias="board" type="bean.QnABoardBean"/>
	<typeAlias alias="comment" type="bean.CommentBean"/>
	
	<resultMap id="boardRes" class="board">
		<result property ="b_idx" column="b_idx" />
		<result property ="b_title" column="b_title" />
		<result property ="b_content" column="b_content" />
		<result property ="b_pwd" column="b_pwd" />
		<result property ="b_regdate" column="b_regdate" />
		<result property ="b_readCount" column="b_readCount" />
 		<result property ="member_id" column="member_id" />
	</resultMap>
	
	<resultMap id="commentRes" class="comment">
	
		<!-- bean.CommentBean과 매칭 -->
		<result property="c_idx" column="c_idx" />
		<result property="b_idx" column="b_idx" />
		<result property="c_content" column="c_content" />
		<result property="c_regdate" column="c_regdate" />
	</resultMap>


	
	
	<!-- 공통으로 사용할 select 절 정의 -->
	<sql id="qboard-select-all">
		SELECT * FROM QNABOARD
	</sql>
	
	<sql id="qboard-select-com">
		SELECT * FROM COMMENTBOARD
	</sql>
	
	<!-- 공통으로 사용할 where-b_idx 절 정의 -->
	<sql id="qboard-where-b_idx">
		WHERE b_idx = #b_idx#
	</sql>
	
	<!-- 요 주의 -->
	<!-- where-c_idx 절 정의 -->
	<sql id="qboard-where-c_idx">
		WHERE c_idx = #c_idx#
	</sql>	
	
	
	<!--게시판 리스트 보기 정의 -->
	<select id="qboard-selectAll" resultMap="boardRes" >
		<include refid="qboard-select-all" />
		 ORDER BY b_idx DESC
	</select>
	
	<!-- 글 상세보기 정의 -->
	<select id="qboard-selectOne" resultMap="boardRes" parameterClass="int">
		<include refid="select-all" />
		<include refid="where-no" />
	</select>
	
	
	<!-- insert 쿼리문 정의 -->
	<insert id="insertBoard" parameterClass="board">
		INSERT INTO QNABOARD(B_IDX, B_TITLE,MEMBER_ID,B_CONTENT, B_REGDATE,B_PWD)
		VALUES (QNABOARD_NO_SEQ.NEXTVAL, #b_title#, #member_id#,#b_content#, #b_regdate#,#b_pwd#)
	</insert>
	
	
	
</sqlMap>












