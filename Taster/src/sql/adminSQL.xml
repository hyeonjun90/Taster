<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>
<sqlMap>

	<typeAlias alias="admin_shop" type="bean.ShopBean"/> <!-- 관리자 삽 관리 -->
	<typeAlias alias="ApprovalReq" type="bean.RequestListBean"/> <!-- 신규등록 승인 요청 리스트 -->

	
		<resultMap id="AshopRes" class="admin_shop"><!-- 관리자 삽 관리 -->
			<result property="shop_idx" column="shop_idx"/>
			<result property="shop_name" column="shop_name"/>
			<result property="shop_tel" column="shop_tel"/>
			<result property="shop_kind" column="shop_kind"/>
			<result property="shop_addr1" column="shop_addr1"/>
			<result property="shop_addr2" column="shop_addr2"/>
			<result property="shop_addr3" column="shop_addr3"/>
			<result property="shop_addr4" column="shop_addr4"/>
			<result property="shop_price" column="shop_price"/>
			<result property="shop_holiday" column="shop_holiday"/>	
			<result property="shop_readCount" column="shop_readCount"/>
			<result property="shop_new" column="shop_new"/>
		</resultMap>
		
		<resultMap id="AprReqRes" class="AprReq">   <!-- 신규등록 승인 요청 리스트 -->
			<result property="r_idx" column="r_idx"/>
			<result property="r_nicname" column="r_nicname"/>
			<result property="r_shop_name" column="r_shop_name"/>
			<result property="r_shop_tel" column="r_shop_tel"/>
			<result property="r_shop_kind" column="r_shop_kind"/>
			<result property="r_shop_addr1" column="r_shop_addr1"/>
			<result property="r_shop_addr2" column="r_shop_addr2"/>
			<result property="r_shop_addr3" column="r_shop_addr3"/>
			<result property="r_shop_addr4" column="r_shop_addr4"/>
			<result property="r_shop_price" column="r_shop_price"/>
			<result property="r_shop_holiday" column="r_shop_holiday"/>	
		</resultMap>
		
		<!-- ShopRes에서 공통으로 사용할 select-all 명령문 -->
		<sql id="Shop-select-all">
		SELECT * FROM SHOP
		</sql>
		
		<!-- 공통으로 사용할 where-Sidx 명령문 -->
		<sql id="Shop-where-Sidx">
			WHERE shop_idx = #shop_idx#
		</sql>
		
		<!-- select 쿼리문 정의-->
		<select id="Shop-selectAll" resultMap="AshopRes" parameterClass="int">
			<include refid="Shop-select-all"/>
			ORDER BY shop_idx DESC
		</select>
		
		<select id="Shop-selectOne" resultMap="AshopRes" parameterClass="int">
			<include refid="Shop-select-all"/>
			<include refid="Shop-where-Sidx"/>
		</select>
		
		<select id="Shop-selectLastNo" resultClass="admin_shop" parameterClass="int">
			SELECT max(shop_idx) as shop_idx FROM SHOP
		</select>
		
		<select id="Shop-selectName" resultMap="AshopRes">
			<include refid="Shop-select-all"/>
			<include refid="Shop-where-Sidx"/>
			AND shop_name = #shop_name#
		</select>
		
		<!-- insert 쿼리문 정의 -->
		<insert id="Shop-insertAshop" parameterClass="admin_shop">
		INSERT INTO SHOP(shop_idx, shop_name, shop_tel, shop_kind, shop_addr1, shop_addr2, shop_addr3, shop_addr4, shop_price, shop_holiday, shop_readCount, shop_new)
		VALUES (shop_no_seq.NEXTVAL, #shop_name#, #shop_tel#, #shop_kind#, #shop_addr1#, #shop_addr2#, #shop_addr3#, #shop_addr4#, #shop_price#, #shop_holiday#, #shop_readCount#, #shop_new#)
		</insert>
		
		
		
		
		<!-- ApprovalRequest(신규등록요청)에서 공통으로 사용할 select-all 명령문 -->
		<sql id="AprReq-select-all">
		SELECT * FROM REQUEST_LIST
		</sql>
		
		<!-- 공통으로 사용할 where-Ridx 명령문 -->
		<sql id="AprReq-where-Ridx">
			WHERE r_idx = #r_idx#
		</sql>
		
		<!-- select 쿼리문 정의-->
		<select id="AprReq-selectAll" resultMap="AprReqRes" parameterClass="int">
			<include refid="AprReq-select-all"/>
			ORDER BY r_idx DESC
		</select>
		
		<select id="AprReq-selectOne" resultMap="AprReqRes" parameterClass="int">
			<include refid="AprReq-select-all"/>
			<include refid="AprReq-where-Ridx"/>
		</select>
		
		<select id="AprReq-selectLastNo" resultClass="AprReq" parameterClass="int">
			SELECT max(r_idx) as r_idx FROM REQUEST_LIST
		</select>
		
		<select id="AprReq-selectName" resultMap="AprReqRes">
			<include refid="AprReq-select-all"/>
			<include refid="AprReq-where-Sidx"/>
			AND shop_name = #shop_name#
		</select>
		
		<!-- insert 쿼리문 정의 -->
		<insert id="AprReq-insertReqList" parameterClass="AprReq">
		INSERT INTO REQUEST_LIST(r_idx, r_nicname, , r_shop_tel, r_shop_kind, r_shop_addr1, r_shop_addr2, r_shop_addr3, r_shop_addr4, r_shop_price, r_shop_holiday)
		VALUES (request_no_seq.NEXTVAL, #r_nicname#, #r_shop_name#, #r_shop_kind#, #r_shop_addr1#, #r_shop_addr2#, #r_shop_addr3#, #r_shop_addr4#, #r_shop_price#, #r_shop_holiday#)
		</insert>
		
		
		<result property="r_idx" column="r_idx"/>
			<result property="r_nicname" column="r_nicname"/>
			<result property="r_shop_name" column="r_shop_name"/>
			<result property="r_shop_tel" column="r_shop_tel"/>
			<result property="r_shop_kind" column="r_shop_kind"/>
			<result property="r_shop_addr1" column="r_shop_addr1"/>
			<result property="r_shop_addr2" column="r_shop_addr2"/>
			<result property="r_shop_addr3" column="r_shop_addr3"/>
			<result property="r_shop_addr4" column="r_shop_addr4"/>
			<result property="r_shop_price" column="r_shop_price"/>
			<result property="r_shop_holiday" column="r_shop_holiday"/>	

</sqlMap>